!function(g){"use strict";g(document).ready(function(){g(".exwf-calendar").each(function(){g(this);var i,s=g(this).data("id"),r=g("#"+s+" input[name=ajax_url]").val(),l=g("#"+s+" input[name=location]").val(),c=(g("#"+s+" input[name=taxonomy]").val(),g("#"+s+" input[name=terms]").val(),g("#"+s+" input[name=calendar_orderby]").val()),o=g("#"+s+" input[name=calendar_view]").val(),e=g("#"+s+" input[name=calendar_defaultDate]").val(),a=g("#"+s+" input[name=calendar_firstDay]").val(),t=g("#"+s+" input[name=scrolltime]").val(),n=g("#"+s+" input[name=mintime]").val(),d=g("#"+s+" input[name=maxtime]").val(),u=g("#"+s+" input[name=viewas_button]").val(),f=g("#"+s+" input[name=current_url]").val(),m=g("#"+s+" input[name=param_shortcode]").val(),p=g("#"+s+" input[name=mindate]").val(),h=g("#"+s+" input[name=maxdate]").val(),v="title";""==u&&(v="",u="title");var w="month",y="bottom";"week"==o?(w="agendaWeek",y="mouse"):"day"==o?(w="agendaDay",y="mouse"):""!=o&&"month"!=(w=o)&&(y="mouse"),!g("#"+s+" #calendar").hasClass("widget-style")&&!g("#"+s+" #calendar").hasClass("fullcal-style")&&g(window).width()<765&&(w="listMonth"),g("#"+s+" #calendar").fullCalendar({windowResize:function(e){g("#"+s+" #calendar").hasClass("widget-style")||g("#"+s+" #calendar").hasClass("fullcal-style")||(g(window).width()<765?g("#"+s+" #calendar").fullCalendar("changeView","listMonth"):g("#"+s+" #calendar .fc-listYear-button").hasClass("fc-state-active")||g("#"+s+" #calendar").fullCalendar("changeView",w))},views:{listYear:{type:"listYear",buttonText:g("#"+s+" input[name=yearl_text]").val()}},header:{left:"prev,next today",center:v,right:u},validRange:{start:""!=p?p:"",end:""!=h?h:""},defaultDate:e,defaultView:w,firstDay:a,displayEventTime:!1,locale:g("#"+s+" input[name=calendar_language]").val(),eventLimit:!1,nextDayThreshold:"00:00:00",scrollTime:""!=t?t:"00:00:00",minTime:""!=n?n:"00:00:00",maxTime:""!=d?d:"24:00:00",events:function(e,a,t,n){g.ajax({type:"GET",url:r,dataType:"json",data:{action:"exwf_get_events_calendar",start:e.unix(),end:a.unix(),location:l,orderby:c,current_url:f,type:o,lang:g("#"+s+" input[name=calendar_wpml]").val(),param_shortcode:m},success:function(e){"0"!=e&&("object"!=typeof(i=e)||null==i?g("#"+s+" .calendar-info").removeClass("hidden"):g("#"+s+" .calendar-info").addClass("hidden"),n(i))}})},eventRender:function(e,a){a.find(".fc-title").html(e.title),a.find(".fc-title").closest("a").attr("href",e.url.replace("&amp;","&")),"basicWeek"!=o||""==e.speakers&&""==e.times||a.find(".fc-title").html(e.times+"<span>"+e.title+"</span> "+e.speakers),a.find(".fc-list-item-title").html(e.title);e='<div class="exwf-tooltip"><div class="exwf-tooltip-content"><h4><a href="'+e.url+'">'+e.title+"</a></h4>"+(e.order_method&&'<p class="spk-status">'+e.order_method+"</p>"||"")+'<p class="tt-start">'+e.startdate+"</p>"+(e.location&&'<p class="tt-loca">'+e.location+"</p>"||"")+(e.status&&'<p class="tt-status">'+e.status+"</p>"||"")+(e.ship_add&&'<p class="spk-des">'+e.ship_add+"</p>"||"")+(e.price&&'<p class="tt-price"><span>'+e.price+"</span></p>"||"")+(e.url_ontt&&'<p class="tt-bt"><a href="'+e.url_ontt+'" class="btn btn btn-primary exwf-button">'+e.text_onbt+"</a></p>"||"")+"</div></div>";a.qtip({prerender:!0,content:{text:e,button:"Close"},style:{tip:{corner:!1,width:12},classes:"ex-qtip"},position:{my:"bottom left",at:"bottom center",target:y,viewport:g("body")},show:{solo:!1},hide:{delay:100,fixed:!0,effect:function(){g(this).fadeOut(100)}}})},eventClick:function(e){if(e.url)return window.open(evurl,"_blank"),!1},loading:function(e){e?g("#"+s).addClass("loading"):g("#"+s).removeClass("loading")},eventAfterAllRender:function(e,a){setTimeout(function(){(!g("#"+s+" .fc-listMonth-view").length||g("#"+s+" .fc-list-empty").length)&&(!g("#"+s+" .fc-listYear-view").length&&!g("#"+s+" .fc-event").length||g("#"+s+" .fc-listYear-view").length&&!g("#"+s+" .fc-listYear-view .fc-list-item").length)?g("#"+s+" .calendar-info").removeClass("hidden"):g("#"+s+" .calendar-info").addClass("hidden")},1e3)},viewRender:function(e,a){e.name&&"listYear"==e.name?g("#"+s+" #calendar .exwf-cal-filter-month").hide(200):g("#"+s+" #calendar .exwf-cal-filter-month").show(200),g("#"+s+" #calendar .fc-toolbar + .exwf-cal-ftgr").length||g("#"+s+" #calendar .fc-toolbar").after(g("#"+s+" .exwf-cal-ftgr").show()),g("#"+s+" #calendar select[name=food_loc]").on("change",function(){var e,l=g("#"+s+" #calendar select[name=food_loc]").val();g("#"+s+" .exwfical-bt").length&&((e=new URL(g("#"+s+" .exwfical-bt a").attr("href"))).searchParams.set("location",l),g("#"+s+" .exwfical-bt a").attr("href",e.toString())),g("#"+s+" #calendar").fullCalendar("removeEventSources"),g("#"+s+" #calendar").hasClass("widget-style")&&jQuery("#"+s+" .fc-day-top").removeClass("hasevent"),g("#"+s+" #calendar").fullCalendar("addEventSource",function(e,a,t,n){g.ajax({type:"GET",url:r,dataType:"json",data:{action:"exwf_get_events_calendar",start:e.unix(),end:a.unix(),location:l,orderby:c,current_url:f,type:o,lang:g("#"+s+" input[name=calendar_wpml]").val(),param_shortcode:m},success:function(e){"0"!=e&&("object"!=typeof(i=e)||null==i?g("#"+s+" .calendar-info").removeClass("hidden"):g("#"+s+" .calendar-info").addClass("hidden")),n(i)}})})})}}),g("#"+s+" select[name=cal-filter-month]").on("change",function(){g("#"+s+" #calendar").fullCalendar("gotoDate",g(this).val())})})})}(jQuery);