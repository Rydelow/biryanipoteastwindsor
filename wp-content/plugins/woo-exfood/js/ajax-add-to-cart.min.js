!function(n){"use strict";n(document).on("submit",".exwoofood-woocommerce form",function(e){n("#food_modal .exwoofood-woocommerce > div .exfd-out-notice").remove();var o=n(this).find(".single_add_to_cart_button"),t=n(this),a=t.find("input[name=add-to-cart]").val()||o.val(),d=n(".ex-fdlist > input[name=food_loc]").val();if(a&&!o.is(".disabled")){e.preventDefault();var i={action:"exwoofood_add_to_cart","add-to-cart":a,loc:d};t.serializeArray().forEach(function(e){i[e.name]=e.value}),n(document.body).trigger("adding_to_cart",[o,i]),n(this).find(".exrow-group.ex-checkbox").length&&n(this).find(".exrow-group.ex-checkbox").each(function(){var e=n(this).find(".ex-options").attr("name"),t=[];n(this).find('input[name="'+e+'"]:checked').each(function(){t.push(n(this).val())}),i[e]=t}),n(".wc-pao-addon-checkbox").length&&n(".wc-pao-addon-checkbox").each(function(){var e=n(this).attr("name"),t=[];n('input[name="'+e+'"]:checked').each(function(){t.push(n(this).val())}),i[e]=t}),n(".ppom-check-input").length&&n(".ppom-check-input").each(function(){var e,t;"checkbox"==n(this).attr("type")&&(e=n(this).attr("name"),t=[],n('input[name="'+e+'"]:checked').each(function(){t.push(n(this).val())}),i[e]=t)}),n(".wccf_product_field_checkbox").length&&n(".wccf_product_field_checkbox").each(function(){var e=n(this).attr("name"),t=[];n('input[name="'+e+'"]:checked').each(function(){t.push(n(this).val())}),i[e]=t});var c=n(".exfd-cart-mini").html();return n.ajax({type:"post",url:wc_add_to_cart_params.ajax_url,data:i,beforeSend:function(e){o.removeClass("added").addClass("ex-loading")},complete:function(e){o.removeClass("ex-loading");var t=n(".exfd-cart-mini");c!=t&&(e.error||o.addClass("added"))},success:function(e){var t;e.error?n("#food_modal .exwoofood-woocommerce > div").append(e.message):(n(".ex-fdlist.exwf-disable-atctg").length||n(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,o]),n(".woocommerce-notices-wrapper").empty().append(e.notices),n(".ex-fdlist.ex-food-plug .exfd-choice.ex-loading").length?n(".ex-fdlist.ex-food-plug .exfd-choice.ex-loading").removeClass("ex-loading"):n(".ex-fdlist .exstyle-3 .exstyle-3-image .exbt-inline span.ex-loading").length&&n(".ex-fdlist .exstyle-3 .exstyle-3-image .exbt-inline span.ex-loading").removeClass("ex-loading"),t=n(".exfd-cart-mini").html(),c==t&&(o.removeClass("added"),"yes"==n("#food_modal .modal-content").data("close-popup")&&n("#food_modal .ex_close").trigger("click")),e=o.closest(".ex-fdlist ").attr("id"),t=n("#"+e).hasClass("table-layout")?"table":"",0==(e=o.closest("#food_modal").find("img").eq(0)).length&&("table"!=t?0==(e=o.closest(".item-grid").find("img").eq(0)).length&&0==(e=o.closest(".item-grid").find(".ex-fly-cart").eq(0)).length&&(e=o.closest(".item-grid")):0==(e=o.closest("tr").find("img").eq(0)).length&&(e=o.closest("tr").find(".item-grid"))),0==e.length&&jQuery(".ex_modal.exfd-modal-active").length&&(e=jQuery(".ex_modal.exfd-modal-active .exmd-no-img")),t=e,0!=(e=jQuery(".exfd-shopping-cart")).length&&t.length&&t.clone().offset({top:t.offset().top,left:t.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"1001"}).appendTo(jQuery("body")).animate({top:e.offset().top+10,left:e.offset().left,width:40,height:40},800).animate({width:0,height:0},function(){jQuery(this).detach()}),n(".exfd-cart-mini").css("opacity",".6"),n.ajax({type:"post",url:wc_add_to_cart_params.ajax_url,data:{action:"exwoofood_refresh_cart"},success:function(e){n("div.exfd-cart-mini").remove(),n(e.fragments["div.exfd-cart-mini"]).insertAfter(".exfd-cart-content .exfd-close-cart"),n(".exfd-shopping-cart span.exfd-cart-num").replaceWith(e.fragments["span.exfd-cart-num"])}}),"yes"==n("#food_modal .modal-content").data("close-popup")&&n("#food_modal .ex_close").trigger("click"),o.hasClass("ex-loading")&&o.removeClass("ex-loading"),n(document).trigger("exwfqv_added_tocart"))}}),!1}})}(jQuery);